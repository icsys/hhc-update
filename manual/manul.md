[TOC]

# 概述

## 产品功能

该软件可以替代罗斯蒙特475以及其他类似的HART手操器，并支持无线操作、自动更新版本、中/英文菜单、过程变量趋势图显示、仪表告警实时检测等其他手操器无法提供的功能，兼容国内外主流的 压力仪表、温度仪表、流量计、物位计等近200种HART协议智能仪表。

稳定可靠
:   采用高品质的7寸安卓（Android）平板电脑，并配以带扶手的防滑防摔护套，使用更放心。

无线操作
:   通过Wi-Fi，操作人员可以远距离对仪表进行配置，更安全方便。

操作日志
:   可以查看历史上对仪表进行的任何操作，非常有助于问题定位与回溯提供。

自动更新版本
:   只要将我们的平板连接上互联网，通过内置的一键升级功能，便可自动更新最新的软件版本，及时获得最新的功能通过自动更新。

中/英文菜单
:   可根据使用习惯快捷的切换手操器菜单语言，目前支持中文和英文，且每项菜单中均有对应的帮助说明，详细介绍该项功能的含义及使用方式，使仪表配置更加简单易懂。

动态变量趋势图
:   以趋势图形式显示动态变量，可直观的观察到各个时间点的变量值以及变化趋势，并支持数据历史记录，可追溯查看较长时间段的数据变化。

仪表告警实时检测
:   状态栏实时显示仪表主变量及电流值，如果主变量超出上下限，以红色醒目颜色给出告警。

离线配置及配置导入导出
:   在新厂建设、老厂改造或其他需要调试多台相同型号的仪表时，可以先对其中一台仪表进行配置，完成后保存配置文件，再对其他相同型号仪表配置时可以直接加载该配置文件，进行快速配置。并支持离线（无需连接仪表）配置并保存配置文件，使仪表配置更快捷可靠。

支持仪表高级功能
:   如压力仪表的高端/低端微调、流量计的小流量切除配置、物位计的空标/满标配置、温度仪表的修改传感器类型等等。

支持近200种HART协议仪表
:   支持的常用仪表包括：

    - Rosemount
    1151(压力)、3051C(压力)、3051S(压力)、8732E(电磁流量)、8800D(涡街流量) 等；
    - E+H
    PMD55(差压)、FMD76(差压)、PROMAG50(电磁流量)、PROWIRL72(涡街流量)、PROMASS80(质量流量)、TMT182(温度)、FMR250(雷达)  等；
    - Siemens
    SITRANS P DS(压力)、SITRANS LR250(雷达)  等；　　
    - Yokogawa
    DYF(涡街流量)  等。

同时支持HART网关
:   手操器通过Wi-Fi与HART网关连接后，即可对网关中的仪表进行查看、配置，详细介绍见HART网关产品手册。


## 装配清单


装备名称            | 装备数量  
--------------------|---------
7寸平板电脑         |   一台     
适配器              |   一台
HART集线器（选配）  |   一台
HART网关（选配）    |   一台
工作包              |   一个
螺丝刀              | 一套
用户手册            |   一本

# 硬件介绍

## 产品外观

> 真实外观以实物为准

![adapter][adapter]

## 指示灯
指示灯      | 颜色  | 状态  | 状态说明
------------|-------|-------|-------------------------- 
充电指示灯  | 红    | 灭    | 非充电状态，或已充满     
充电指示灯  | 红    | 常亮  | 正在充电
运行指示灯  | 绿    | 灭    | 电源关闭，或电池没电
运行指示灯  | 绿    | 慢闪  | 设备已启动，等待手操器连接
运行指示灯  | 绿    | 快闪  | 数据收发
运行指示灯  | 绿    | 常亮  | 设备异常，需要人工复位


## 配置开关
  开关      | 位置  | 说明  
 -----------|-------|------------------------
  电源开关  | On    | 电源打开，处于工作模式
  电源开关  | Off   | 电源关闭，处于非工作模式
  电阻开关  | On    | 使用内部电阻（≥250Ω）
  电阻开关  | Off   | 不使用内部电阻（≥250Ω）

## 接线方式

- **接线方式1**
使用适配器内置内阻，适配器电阻开关必须处于**开**状态
![connect][connect]

- **接线方式2**
使用外置内阻，适配器电阻开关必须处于**关**状态
![connect2][connect2]

- **接线方式3**
环路本身电阻大于250欧姆，适配器电阻开关必须处于**关**状态
![connect3][connect3]


# 软件介绍

## 无线连接

步骤1
:  按上图所示的接线方式把适配器接入回路，确保设配器上的电阻开关处于打开状态；如果仪表提供独立的HART信号输出接口，适配器要直接连接到HART信号端子上；

步骤2
:   打开适配器电源，绿灯慢闪表示运行正常，并等待手操器连接；

步骤3
:   打开`HART手操器`![APP][app]软件，点击图标![wifi][wifi-connect]，在出现的Wi-Fi列表中，找到以 *IVY_A100_* 开头的热点名称，该热点为HART适配器，点击名称开始连接，默认密码为87654321 ；如果已经连接上，直接按返回按钮返回到HART手操器软件的操作界面即可；

步骤4
:   连接成功后，HART手操器底部状态栏会显示`已连接`，如果没有连接成功，显示的则是`离线状态`。

## 在线配置
　　扫描到仪表后，点击进入即是仪表的操作菜单，与475手操器操作菜单大同小异，不同的仪表，菜单结构可能不一样。
　　菜单项主要有三类：目录，变量，方法。
　　如果菜单项为目录，左侧会显示蓝色小色块 ![menu][color-menu]，右侧会显示`>`图标![>][arrow]，表示可以进入下一级目录。
　　如果菜单项为变量，左侧会显示绿色小色块 ![var][color-var]，右侧会显示变量的值；变量又分为只读变量和可写变量，只读变量不可编辑，点击时会提示`只读变量`，如果变量名称右侧有图标![trend][trend]，表示点击该变量可显示动态趋势图；对于可写变量，点击后会显出配置界面，配置完成后，当前变量的菜单项背景会变成黄色，表示变量已经被修改，变量配置成功生效到仪表后，背景颜色会恢复为白色，如果一直保持黄色，表示最近一次配置没有成功生效到仪表。
　　如果菜单项为方法，左侧会显示橙色小色块 ![method][color-method]，右侧会显示扳手图标![method][method]；方法一般会有多步操作，用户可以根据提示进行下一步操作。


## 配置管理
### 配置数据
每个仪表对应的设备菜单中都包含【配置数据】项，进入后可以选择【保存配置】、【加载配置文件】、【删除配置文件】。

 - 【保存配置】
保存当前仪表的配置数据。可以用于对其他同型号仪表的快速配置，也可用来追溯当前仪表的配置记录；建议保存文件时文件名中多增加一些有效信息，如：3051S_20131112_012，文件名含义：仪表3051S (仪表工位号)、20131112(配置日期)、012(操作人员编号)。后续在进行配置追溯时可以通过配置文件名称快速判断出哪个操作员在什么时间对哪个仪表进行的配置。

 - 【加载配置文件】
选择之前保存的同型号的仪表的配置文件，直接使用该配置文件对当前仪表进行快速配置。

 - 【删除配置文件】
删除指定的配置文件。

### 离线配置

离线配置功能可以让您在不连接仪表的情况下（如在办公室或家里），预先配置好数据，进入工厂连接仪表后可以直接选择该配置文件进行快速配置，大大缩短操作人员在工厂配置仪表的时间。

打开HART手操器软件后，在主界面上有【离线配置】菜单，点击后进入离线配置菜单，菜单项的含义如下：
 
- 【配置文件】
列出手操器中所有保存的配置文件，选择需要的配置文件（如3051S_20131112_012.cfg），打开后可以查看各变量的配置值，可以方便追随到2013年11月12号012操作员对3051S仪表的配置数据。可以在该配置文件的基础上略作调整后保存成新的配置文件。

- 【内置设备描述文件】
按照【设备制造商】【仪表类型】【仪表型号】三级菜单选择要配置的仪表，在仪表菜单中修改完配置后，在【配置数据】菜单中选择【保存配置】存盘。

- 【用户自定义设备描述文件】
针对二次开发的仪表厂商用户，用户可以自己编写DD文件，存入指定目录，即可在该目录下看到自定义的DD文件；普通用户无需关心该菜单。


## 仪表告警
手操器与仪表连接后，会实时监控仪表状态，如果输出电流低于4mA或超出20mA，会在底部状态栏显示红色告警状态。
　　
## 中/英文菜单
点击顶部工具栏的![lang][lang]图标，可以一键切换中/英文菜单。
中英文的描述与475手操器大同小异，操作人员可以根据自己的习惯选择语种；每项菜单中均有详细的帮助说明（英文没有帮助说明），描述该项的作用及基本用法，更方便操作人员对仪表进行配置。

## 软件升级
在HART手操器的系统帮助中（在图标![overflow][overflow]下），会显示`软件版本`，点击即可自动检查新版本并下载；在下载期间，请不要退出软件，下载完成后，请根据提示安装，安装完成后，第一次运行新版本软件可能需要初始化运行数据，请耐心等候。

## 授权更新
没有授权，您无法使用HART手操器软件对仪表进行配置。
在HART手操器的系统帮助中（在图标![overflow][overflow]下），会显示`授权状态`，如果不是`已授权`状态，您需要先通过电话或E-Mail申请，并提供您的`设备ID`，在授权文件准备好后，我们会通过电话或E-Mail通知您，您可以点击系统帮助菜单中的`授权状态`自动更新授权文件。

## 操作日志
操作日志记录了用户在HART手操器中的每一步操作，方便用户分析与回溯。
点击顶部工具栏图标![overflow][overflow]，便可看到操作日志的入口；打开操作日志后，您还可以通过点击工具栏图标![send][send]，以蓝牙、E-Mail、或其他您的设备支持的方式将操作日志发送到外部。


# 操作案例

## 仪表配置案例
以配置Rosemount 3051S压力仪表为例。

步骤1
:   打开仪表后盖，由于该仪表为2线制，需拆下电源线任意一端，然后把适配器串入回路;

步骤2
:   打开适配器的`电阻开关`和`电源开关`，此时绿灯开始慢闪；

步骤3
:   参考[无线连接](#无线连接) 部分的介绍，确保手操器和适配器的Wi-Fi正常连接；

步骤4
:   连接成功后开始查询仪表，手操器提供三种方式进行查询：

- 【按全部地址查询】
从0到63号地址逐个查询；适合不知道仪表地址时使用。
- 【按指定地址查询】
输入地址直接查询；适合知道仪表地址时使用。
- 【指定地址范围查询】
输入地址范围，在指定地址范围内查询仪表；适合不知道仪表具体地址，但知道大概地址范围时使用。

    由于我们不知道该仪表的地址，所以可以选择【按全部地址查询】，多数仪表出厂时地址默认为0，所以我们很快便查询到该仪表，手操器上会显示该仪表的地址、工位号；

步骤5
:   点击进入仪表菜单，手操器开始和仪表通讯，读取仪表当前配置信息，软件顶部会出现动态旋转的圆圈图标![circle][circle]，表示正在与仪表通信；刚进入仪表菜单时，很多变量值为`...`，表示正在读取，一般几秒钟后便可正常显示；

步骤6
:   进入【基本设置】，当前【PV单位】为`Pa`，我们把它改为`kPa`。点击【PV单位】，列出所有可选的单位，从中找到`kPa`，选择后点击`确定`，【PV单位】立即变为黄色背景，同时软件顶部出现图标![circle][circle]，配置成功后【PV单位】黄色背景消失，如果配置失败会出现错误提示，且【PV单位】保持黄色背景；

步骤7
:   进入【用户量程】菜单，设置用户量程上下限。
可以通过【用户量程上限】和【用户量程下限】直接输入量程值进行配置，也可通过给仪表施加特定压力，然后点击【设置量程下限】和【设置量程上限】来进行配置。
> **注意：** 【用户量程上限】和【用户量程下限】不能超出【传感器量程上限】和【传感器量程下限】，同时【用户量程上限】和【用户量程下限】不能过分接近，两者直接跨度必须大于【传感器最小精度】（该信息在【基本设置】【传感器信息】中可查看）

步骤8
:   配置完成后可以进入【配置数据】菜单，点击【保存配置】，把本次配置的数据信息保存下来，输入配置文件名：3051S_20131112_012，点击`确定`即可完成保存；

步骤9
:   该仪表配置结束，如果还有若干个相同型号的仪表需要进行相同的配置，对这些仪表执行 步骤1—5，然后进入【配置数据】菜单，选择【加载配置文件】，选择3051S_20131112_012.cfg文件，`确定`后手操器自动以该配置文件中保存的配置信息对该仪表进行配置（如【PV单位】会配置成`kPa`；配置失败的项会保持黄色背景，可以人为干预重新配置该项；如果有其他需要特殊调整的项，也需人为干预进行配置。

## 离线配置案例
可以在不连接仪表的情况下，预先把信息配置好，连接仪表后选择加载该配置文件，自动完成仪表配置。
下面以配置Rosemount 3051S压力仪表为例
> **提示：** 步骤1--3可以在比较舒适的环境下完成。


步骤1
:   启动HART手操器软件，进入【离线配置】【选择设备文件】菜单，从Rosemount目录下找到3051S对应的文件，点击进入设备菜单。

步骤2
:   进入【配置变量】菜单，把所有可配置的变量修改为希望配置的值（也可通过其他菜单路径配置这些变量），如【PV单位】修改为`kPa`【阻尼值】修改为2，【用户量程下限】修改为0.000。

步骤3
:   进入【配置数据】菜单，选择【保存配置】，把刚配置好的信息保存下来。如命名为3051S_20131112_012；

步骤4
:   到现场配置仪表，进入仪表菜单后，进入【配置数据】菜单，选择【加载配置文件】，选择3051S_20131112_012.cfg文件，`确定`后手操器自动以该配置文件中保存的配置信息对该仪表进行配置（如【PV单位】会配置成`kPa`，【用户量程下限】修改为0.000）。配置失败的项会保持黄色背景，可以人为干预重新配置该项，如果有其他需要特殊调整的项，也需人为干预进行配置。

# 故障排查
## 适配器绿灯不亮
- 电源开关未打开，把电源开关拨到【信号线】方向；
- 电池没电，需充电；

## 手操器与适配器一直连接失败
- 检查适配器是否已上电，电源开关是否打开；
- 手操器与适配器距离是否太远，建议适配器的Wi-Fi信号保持在两个以上；
- 检查适配器是否绿灯常亮，如果常亮则表示运行异常，可把适配器重新上电，然后再重新尝试；
- 退出HART手操器软件（连续按返回键），然后重新打开，再重新尝试连接；
- 退出HART手操器软件（连续按返回键），关闭系统（在系统设置中关闭），然后重新打开HART手操器软件，再重新尝试连接；

## 手操器与仪表通讯异常
- 适配器与仪表连接不牢靠或接线方式错误，请确认后再试；
- 手操器与适配器距离太远，信号传输不稳定，请靠近后再试；

## 部分变量值显示为 …
- 该变量的正确值就是`…`；
- 通讯错误，导致该变量值没有成功读取，可以返回到主菜单后重新扫描该仪表；

----------

# 附录A：术语表


设备组态
:   定义设备物理属性和运行特性的参数。不包括动态数据。

现场设备
:   除HART数字通信信号外，现场设备可以产生或接收模拟信号。

HART设备
:   采用HART协议进行信息通信的设备。

HART回路
:   一种通信网络，其主设备和从设备都是HART智能或HART兼容设备。

HART位号
:   用于识别设备的 8 字符域。HART 通用修订版本 6 或更高版本的设备还可以采用 32 字符的长位号。该域储存在 HART 设备中并且可以修改。

HART协议
:   高速远程寻址的转换器通信协议。一种适用于数字式增加型4-20mA通信和智能现场设备的工业标准协议。

单点模式
:   HART回路中只支持一个轮询地址为0的HART设备；该工作模式下数字信号和4~20mA模拟信号同时有效。

多点模式
:   HART回路中HART设备的轮询地址为0~63，且不重复；该工作模式下只有数字信号有效，4~20mA模拟信号无效。

突发（Burst）模式
:   处于该模式的HART设备,自动连续的发送信息；一个HART回路中只能存在一个处于该模式的HART设备。

轮询
:   一种依次查询网络以确定哪些设备在线的方法。


:   是一种交换数据的无线协议。

　　　　
# 附录B：仪表菜单

>    **备注：** 只包括部分仪表的菜单，完整菜单请直接在手操器APP上查看

## 通用菜单
【诊断与维护】【回路测试】
:   可以通过输入4—20mA之间的电流值，让仪表自动输出输入的值，起到信号发生的作用。

【诊断与维护】【主量调零】
:   使用当前实际测量值作为新的零点，但调整结果必须在设备定义的上下限内，用户量程保持不变。

【诊断与维护】【设备复位】
:   该操作等价于设备断电复位；

【诊断与维护】【输出调节】
:   做电流微调，使仪表达到更精确的输出。

【基本设置】【PV单位】
:   修改主变量单位；

【基本设置】【轮询地址】
:   用于HART主站识别仪表的地址，为0时仪表工作在单点模式，此时数字信号和4~20mA模拟信号同时有效；非0时仪表工作在多点模式，此时处于全数字信号通讯状态，模拟信号无效。

【基本设置】【用户量程】【用户量程上限】
:   设定20mA对应的值。

【基本设置】【用户量程】【用户量程下限】
:   设定4mA对应的值。

【基本设置】【用户量程】【设置量程下限】
:   将仪表当前实际值设置成用户量程下限，量程下限的改变将成比例的改变量程上限的值，因此精度保持不变。

【基本设置】【用户量程】【设置量程上限】
:   将仪表当前实际值设置成用户量程上限，量程上限的改变不影响量程下限的值。
  > **提示：** 通过设定【用户量程】，可以最大限度的提高模拟输出的分辨率，当仪表具体应用的预期值在用户量程范围内时，仪表最精确。

## 压力菜单
> - 以Rosemount 3051S为例
> - 包含【通用菜单】中的所有功能，同时支持【高级菜单】。


【高级菜单】【设备材料信息】
:   设置仪表及连接处所使用材料类型。

【高级菜单】【传感器微调】【主量调零】
:   给仪表加0压力后选择次操作，仪表自动调节零点；
  
【高级菜单】【传感器微调】【低端微调】
:   给仪表加低端压力，输入所加的压力值，仪表自动校正，使输出为所加的压力值。
  
【高级菜单】【传感器微调】【高端微调】
:   给仪表加高端压力，输入所加的压力值，仪表自动校正，使输出为所加的压力值。

【高级菜单】【传感器微调】【恢复出厂校准】
:   将仪表模拟输出微调重新设置到装运时的工厂设置。

【高级菜单】【报警及饱和】
:   设置仪表报警及饱和上下限及报警方向。
  
【高级菜单】【传感器警戒信息】【压力警戒信息】
:   设置压力警戒上下限，当仪表压力超过设定值时，仪表会输出告警信息。
  
【高级菜单】【传感器警戒信息】【温度警戒信息】
:   设置温度警戒上下限，当仪表温度超过设定值时，仪表会输出告警信息。
　　
　　
## 涡街流量菜单
>   - Rosemount 8800D为例
>   - 包含【通用菜单】中的所有功能，同时支持【高级菜单】。
  
【高级菜单】【变量映射】
:   可以选择不同的测量类型，如：体积流量、质量流量、速度流量、发射频率、脉冲频率、累计值、电子温度等。

【高级菜单】【传感器】【工艺】【仪表模式】
:   可以对带有一体化温度传感器的设备，进行激活温度传感器。

【高级菜单】【传感器】【工艺】【工艺流体】
:   选择测量流体的类型，液体、气体。

【高级菜单】【传感器】【工艺】【管道内径】
:   与仪表邻接的管道的内径可能产生入口效应，因而可能改变仪表的读数，必须指定管道的精确内径，才能修正这种效应，为次变量输入适当的值。

【高级菜单】【传感器】【工艺】【安装影响】
:   支持用户补偿因直管段不完美导致的仪表安装影响。

【高级菜单】【传感器】【流量传感器】【参考K系数】
:   在工厂按照具体应用的实际K系数设置，只有在更换仪表部件后，才需要更改此值。

【高级菜单】【传感器】【流量传感器】【补偿后K系数】
:   基于参考K系数，是针对给定的工艺温度、接液材料、本体编号和管道内径补偿后的值。补偿K系数是由仪表的电子装置计算的信息变量。

【高级菜单】【传感器】【温度传感器】【T/C故障模式】
:   允许用户配置温度传感器故障模式。若热电偶传感器发生故障，则仪表可转为报警输出模式，或者使用固定工艺流体温度值继续正常工作。

【高级菜单】【报警及饱和信息】
:   修改仪表的报警及饱和上下限及报警等级（Rosemount标准、NAMUR值）.

【高级菜单】【小信号切除】
:   该功能是为了消除零点漂移。

【高级菜单】【累加器】
:   对流量、速度、体积流量做累加设置。
　　
　　
　　
## 电磁流量菜单
>   - Rosemount 8732E为例
>   - 包含【通用菜单】中的所有功能，同时支持【高级菜单】

【高级菜单】【反向流】
:   启用或禁用仪表读取反向流的功能，使用反向流可以让仪表读取负流量。当管路中的流体在负方向上流动，或当电极线路或线圈被颠倒是，就会出现这种情况。它可以让累加器在反方向上计数。

【高级菜单】【电子部件温度】
:   用户可以查看仪表电子部件的当前温度。

【高级菜单】【管路尺寸】
:   必须对管路尺寸（传感器尺寸）进行合理设置，以便于连接着变送的实际传感器匹配。

【高级菜单】【密度值】
:   设定测量流体的密度，用于将体积流量转换为质量流量。

【高级菜单】【脉冲输出】
:   该菜单中可查看当前脉冲输出值；设置脉冲定标、脉冲宽度、脉冲模式，并可做脉冲输出回路测试。

【高级菜单】【空管限制】
:   该菜单中可查看当前空管值；设置空管触发水平、空管计数；仪表根据设定值触发空管报警。

【高级菜单】【累加器设置】：该菜单中可查看累加值（毛总量、净总量、反向流总量）；可启动/停止/复位累加器。

【高级菜单】【报警水平】
:   菜单中可设置仪表的报警及饱和上下限及报警标准。

【高级菜单】【信号处理】【小流量切除】
:   该功能是为了消除零点漂移。

【高级菜单】【显示设置】【语言】
:   选择仪表表头显示器上显示语种。

【高级菜单】【显示设置】【流量显示】
:   选择仪表表头显示器上显示内容。

【高级菜单】【显示设置】【累计显示】
:   选择仪表表头显示器上显示累加值的类别。

【高级菜单】【显示设置】【显示锁定】
:   此项让您可以启用或禁用仪表的显示锁定。启用显示锁定操作将会禁用操作界面键，防止因擦拭玻璃罩而造成的无意的变化。

【高级菜单】【材料】
:   该菜单中提供仪表相关材料选择。
 


  [app]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/app.png
  [adapter]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/adapter.png
  [connect]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/connect.png
  [connect2]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/connect2.png
  [connect3]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/connect3.png
  [wifi-connect]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/wifi-connect.png
  [trend]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/trend.png
  [arrow]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/arrow.png
  [method]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/method.png
  [overflow]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/overflow.png
  [lang]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/lang.png
  [circle]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/circle.png 
  [color-menu]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/color-menu.png 
  [color-var]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/color-var.png 
  [color-method]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/color-method.png
  [send]: https://raw.githubusercontent.com/icsys/hhc-update/master/manual/pics/send.png